(()=>{var e={};e.id=974,e.ids=[974],e.modules={597:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/monten1/Documents/VSCode/books-finder/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/monten1/Documents/VSCode/books-finder/app/page.tsx","default")},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4788:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>C});var s=t(687),a=t(7166),i=t(6057),o=t(4589);function n({handleChangePage:e}){let{activePage:r}=(0,i.GV)(e=>e.pages);return(0,s.jsxs)("div",{className:"pagination_main",children:[(0,s.jsx)(d,{className:"left_arrow",onClick:()=>e(r-1)}),(0,s.jsx)("div",{className:"pagination_pages",children:(0,s.jsx)(l,{handleChangePage:e})}),(0,s.jsx)(d,{className:"right_arrow",onClick:()=>e(r+1)})]})}let l=({handleChangePage:e})=>{let{pagesArr:r}=(0,i.GV)(e=>e.pages);return(0,s.jsx)(s.Fragment,{children:r.map(r=>(0,s.jsx)("div",{onClick:()=>e(r.id),className:`${r.active&&"active"}`,children:r.id},r.id))})},d=({className:e,onClick:r})=>(0,s.jsx)("div",{className:"arrow_bg",children:(0,s.jsx)("svg",{className:e,onClick:r,fill:"#000000",height:"14px",width:"14px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 330 330",xmlSpace:"preserve",children:(0,s.jsx)("path",{id:"XMLID_92_",d:"M111.213,165.004L250.607,25.607c5.858-5.858,5.858-15.355,0-21.213c-5.858-5.858-15.355-5.858-21.213,0.001 l-150,150.004C76.58,157.211,75,161.026,75,165.004c0,3.979,1.581,7.794,4.394,10.607l150,149.996 C232.322,328.536,236.161,330,240,330s7.678-1.464,10.607-4.394c5.858-5.858,5.858-15.355,0-21.213L111.213,165.004z"})})});function c(){let{entities:e,status:r}=(0,i.GV)(e=>e.books),{perPage:t}=(0,i.GV)(e=>e.filters),o=(0,i.jL)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"filters_main",children:[(0,s.jsxs)("div",{className:"filters_left",children:[!1,(0,s.jsx)(h,{arr:u,type:"perPage"})]}),(0,s.jsx)("div",{className:"filters-right",children:"loaded"===r&&(0,s.jsx)(n,{handleChangePage:(r=1)=>{let s=Math.ceil((e.numFound||e.work_count||e.size)/t);r<1?r=1:r>s&&(r=s),localStorage.setItem("activePage",JSON.stringify(r)),o((0,a.yd)({activePage:r,numberOfPages:s}))}})})]}),(0,s.jsx)("div",{className:"hr"})]})}let h=({arr:e,type:r})=>{let{filterBy:t,perPage:a}=(0,i.GV)(e=>e.filters),n=(0,i.jL)(),l=e=>{n((0,o.j7)(Number(e.target.value))),localStorage.setItem("perPage",JSON.stringify(e.target.value))},d=e=>{n((0,o.Er)(e.target.value)),localStorage.setItem("filterBy",e.target.value)};return(0,s.jsxs)("div",{className:"per_page_main",children:[(0,s.jsx)("p",{children:"perPage"===r?"PER PAGE: ":"FILTER BY: "}),(0,s.jsx)("select",{value:"perPage"===r?a:t,onChange:e=>"perPage"===r?l(e):d(e),children:e.map(e=>(0,s.jsx)("option",{value:e.value,children:"perPage"===r?e.value:e.child},e.id))})]})},u=[{id:0,value:"3"},{id:1,value:"6"},{id:2,value:"9"},{id:3,value:"12"}];var p=t(3210),m=t(2914);let g=[{id:0,child:"Love"},{id:1,child:"Crime"},{id:2,child:"Action"},{id:3,child:"Drama"},{id:4,child:"Music"},{id:5,child:"Business"},{id:6,child:"Philosophy"}],x=[{id:0,authorKey:"/authors/OL23919A",child:"J. K. Rowling"},{id:1,authorKey:"/authors/OL26783A",child:"Лев Толстой"},{id:2,authorKey:"/authors/OL24529A",child:"Emily Brontë"},{id:3,authorKey:"/authors/OL27695A",child:"Agatha Christie"},{id:4,authorKey:"/authors/OL22242A",child:"Фёдор Достоевский"},{id:5,authorKey:"/authors/OL27349A",child:"F. Scott Fitzgerald"},{id:6,authorKey:"/authors/OL9388A",child:"William Shakespeare"},{id:7,authorKey:"/authors/OL21594A",child:"Jane Austen"}];var v=t(7515);let f=()=>{let{status:e}=(0,i.GV)(e=>e.books),{isOpenSort:r}=(0,i.GV)(e=>e.adaptive),t=(0,i.jL)(),[a,o]=(0,p.useState)(null),[n,l]=(0,p.useState)(null),d=(0,p.useRef)(null);return(0,p.useEffect)(()=>{},[]),(0,p.useEffect)(()=>{d.current&&o(Math.floor(d.current.offsetHeight))},[e]),(0,p.useEffect)(()=>{let e=()=>{l(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h4",{onClick:()=>t((0,m.BL)(!r)),className:"sort_toggle",children:r?"CLOSE":"OPEN"}),(0,s.jsx)("div",{className:"hr"}),(0,s.jsxs)("section",{className:"sort_main",ref:d,style:{height:r||n&&n>600?`${a}px`:"0px"},children:[(0,s.jsx)(j,{sort:"category",arr:g}),(0,s.jsx)(j,{sort:"author",arr:x})]})]})},j=({sort:e,arr:r})=>{let{perPage:t,filterBy:o}=(0,i.GV)(e=>e.filters),n=(0,i.jL)(),l=(r,s)=>{let i=s||r.toLowerCase();switch(localStorage.setItem("category",r),localStorage.setItem("sortBy",e),localStorage.setItem("activePage",JSON.stringify(1)),localStorage.setItem("sortKey",i),e){case"author":n((0,v.b5)({sortKey:i,perPage:t,activePage:1}));break;case"category":n((0,v.jE)({sortKey:i,perPage:t,activePage:1,filterBy:o}))}n((0,a.yd)({activePage:1}))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"category",children:[(0,s.jsx)("h3",{children:e.toUpperCase()}),r.map(e=>(0,s.jsx)("p",{onClick:()=>l(e.child,e.authorKey&&e.authorKey),children:e.child},e.id))]}),(0,s.jsx)("div",{className:"hr"})]})};var y=t(474);let b=()=>{let e="recommendations",{activePage:r}=(0,i.GV)(e=>e.pages),{perPage:t,filterBy:s}=(0,i.GV)(e=>e.filters),a=(0,i.jL)(),o=(0,p.useCallback)(()=>{switch(e){case"category":a((0,v.jE)({sortKey:"",perPage:t,activePage:r,filterBy:s}));break;case"author":a((0,v.b5)({sortKey:"",perPage:t,activePage:r}));break;case"recommendations":a((0,v.RU)({perPage:t,activePage:r}));break;default:throw Error("Сортировка не найдена")}},[r,t,s,a,e,""]);(0,p.useEffect)(()=>{o()},[s,r,t,o])};function _(){let{entities:e,status:r}=(0,i.GV)(e=>e.books);return(b(),"loading"===r)?(0,s.jsx)("h2",{className:"loading",children:"Loading..."}):"loaded"===r?(0,s.jsx)(k,{entities:e}):void 0}let k=({entities:e})=>{let r=localStorage.getItem("category")||"",t=e.reading_log_entries||e.works||e.entries;if(void 0!=t)return(0,s.jsxs)("div",{className:"books_main",children:[r&&(0,s.jsx)("h3",{className:"category_name",children:r}),(0,s.jsx)("div",{className:"books_inner",children:Object.keys(t).map(e=>(0,s.jsx)("a",{href:`/books${t[e].key}`,children:(0,s.jsxs)("div",{className:"book_item",children:[(0,s.jsx)(y.default,{className:"cover",src:t[e].cover_id&&`https://covers.openlibrary.org/b/id/${t[e].cover_id}-M.jpg`||t[e].covers&&`https://covers.openlibrary.org/b/id/${t[e].covers[0]}-M.jpg`||"/images/no-cover.jpg",width:150,height:225,style:{height:225},priority:!0,alt:"cover"}),(0,s.jsx)("p",{children:t[e].title})]})},e))})]})};var w=t(9492),P=t(75),N=t(9386);function C(){let e=(0,p.useRef)(null),r=(0,i.jL)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P.default,{}),(0,s.jsx)("main",{onClick:()=>r((0,w.RK)(!1)),ref:e,className:"outer_main",children:(0,s.jsxs)("div",{className:"inner_main",children:[(0,s.jsx)(f,{}),(0,s.jsxs)("div",{className:"books_and_filters",children:[(0,s.jsx)(c,{}),(0,s.jsx)(_,{})]})]})}),(0,s.jsx)(N.default,{})]})}},7858:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=t(5239),a=t(8088),i=t(8170),o=t.n(i),n=t(893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);t.d(r,l);let d={children:["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,597)),"/Users/monten1/Documents/VSCode/books-finder/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,8014)),"/Users/monten1/Documents/VSCode/books-finder/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/monten1/Documents/VSCode/books-finder/app/page.tsx"],h={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8155:(e,r,t)=>{Promise.resolve().then(t.bind(t,597))},8771:(e,r,t)=>{Promise.resolve().then(t.bind(t,4788))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[447,678,520,7],()=>t(7858));module.exports=s})();